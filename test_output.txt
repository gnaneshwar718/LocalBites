
> localbites@1.0.0 test
> node --experimental-vm-modules -r dotenv/config node_modules/jest/bin/jest.js --passWithNoTests

(node:4018) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL src/js/tests/culturePage.test.mjs (11.3 s)
  ● Culture Page › should load data and render 6 items on first page

    SyntaxError: The requested module '../constants/constants.js' does not provide an export named 'ANIMATION_TIMINGS'

      68 |
      69 |     const setupAndLoad = async () => {
    > 70 |         await import('../culture.js?t=' + Date.now());
         |         ^
      71 |         document.dispatchEvent(new Event('DOMContentLoaded'));
      72 |         if (setTimeout.clock === undefined) {
      73 |             await new Promise(resolve => setTimeout(resolve, TEST_TIMEOUTS.LOAD_DELAY));

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:684:5)
      at setupAndLoad (src/js/tests/culturePage.test.mjs:70:9)
      at Object.<anonymous> (src/js/tests/culturePage.test.mjs:81:9)

  ● Culture Page › should handle pagination: next, prev, and dots

    SyntaxError: The requested module '../constants/constants.js' does not provide an export named 'ANIMATION_TIMINGS'

      68 |
      69 |     const setupAndLoad = async () => {
    > 70 |         await import('../culture.js?t=' + Date.now());
         |         ^
      71 |         document.dispatchEvent(new Event('DOMContentLoaded'));
      72 |         if (setTimeout.clock === undefined) {
      73 |             await new Promise(resolve => setTimeout(resolve, TEST_TIMEOUTS.LOAD_DELAY));

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:684:5)
      at setupAndLoad (src/js/tests/culturePage.test.mjs:70:9)
      at Object.<anonymous> (src/js/tests/culturePage.test.mjs:89:9)

  ● Culture Page › should display "No dishes found" on empty search

    SyntaxError: The requested module '../constants/constants.js' does not provide an export named 'ANIMATION_TIMINGS'

      68 |
      69 |     const setupAndLoad = async () => {
    > 70 |         await import('../culture.js?t=' + Date.now());
         |         ^
      71 |         document.dispatchEvent(new Event('DOMContentLoaded'));
      72 |         if (setTimeout.clock === undefined) {
      73 |             await new Promise(resolve => setTimeout(resolve, TEST_TIMEOUTS.LOAD_DELAY));

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:684:5)
      at setupAndLoad (src/js/tests/culturePage.test.mjs:70:9)
      at Object.<anonymous> (src/js/tests/culturePage.test.mjs:108:9)

  ● Culture Page › should verify dish and restaurant links are correctly formatted

    SyntaxError: The requested module '../constants/constants.js' does not provide an export named 'ANIMATION_TIMINGS'

      68 |
      69 |     const setupAndLoad = async () => {
    > 70 |         await import('../culture.js?t=' + Date.now());
         |         ^
      71 |         document.dispatchEvent(new Event('DOMContentLoaded'));
      72 |         if (setTimeout.clock === undefined) {
      73 |             await new Promise(resolve => setTimeout(resolve, TEST_TIMEOUTS.LOAD_DELAY));

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:684:5)
      at setupAndLoad (src/js/tests/culturePage.test.mjs:70:9)
      at Object.<anonymous> (src/js/tests/culturePage.test.mjs:119:9)

  ● Culture Page › should jump to specific dish when carousel item is clicked

    SyntaxError: The requested module '../constants/constants.js' does not provide an export named 'ANIMATION_TIMINGS'

      68 |
      69 |     const setupAndLoad = async () => {
    > 70 |         await import('../culture.js?t=' + Date.now());
         |         ^
      71 |         document.dispatchEvent(new Event('DOMContentLoaded'));
      72 |         if (setTimeout.clock === undefined) {
      73 |             await new Promise(resolve => setTimeout(resolve, TEST_TIMEOUTS.LOAD_DELAY));

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:684:5)
      at setupAndLoad (src/js/tests/culturePage.test.mjs:70:9)
      at Object.<anonymous> (src/js/tests/culturePage.test.mjs:131:9)

  ● Culture Page › should filter by restaurant name in search

    SyntaxError: The requested module '../constants/constants.js' does not provide an export named 'ANIMATION_TIMINGS'

      68 |
      69 |     const setupAndLoad = async () => {
    > 70 |         await import('../culture.js?t=' + Date.now());
         |         ^
      71 |         document.dispatchEvent(new Event('DOMContentLoaded'));
      72 |         if (setTimeout.clock === undefined) {
      73 |             await new Promise(resolve => setTimeout(resolve, TEST_TIMEOUTS.LOAD_DELAY));

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:684:5)
      at setupAndLoad (src/js/tests/culturePage.test.mjs:70:9)
      at Object.<anonymous> (src/js/tests/culturePage.test.mjs:143:9)

  ● Culture Page › should update carousel slides automatically

    SyntaxError: The requested module '../constants/constants.js' does not provide an export named 'ANIMATION_TIMINGS'

      151 |     test('should update carousel slides automatically', async () => {
      152 |         jest.useFakeTimers();
    > 153 |         await import('../culture.js?t=' + Date.now());
          |         ^
      154 |         document.dispatchEvent(new Event('DOMContentLoaded'));
      155 |         for (let i = 0; i < TEST_LOOPS.ANIMATION_FRAMES; i++) await Promise.resolve();
      156 |         jest.advanceTimersByTime(CAROUSEL_INTERVAL);

      at Runtime.linkAndEvaluateModule (node_modules/jest-runtime/build/index.js:684:5)
      at Object.<anonymous> (src/js/tests/culturePage.test.mjs:153:9)

(node:4019) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
(node:4023) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS src/js/tests/homePage.test.mjs (14.413 s)
PASS src/js/tests/auth.test.mjs (16.735 s)
(node:4020) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS src/js/tests/explore.test.mjs (18.031 s)
  ● Console

    console.log
      Initializing ExplorePage...

      at ExplorePage.log [as init] (src/js/explore.js:41:15)

    console.log
      Attempting to fetch from API...

      at ExplorePage.log [as init] (src/js/explore.js:45:15)

    console.log
      Successfully fetched 3 restaurants from API.

      at ExplorePage.log [as init] (src/js/explore.js:49:17)

    console.log
      Rendering restaurants...

      at ExplorePage.log [as init] (src/js/explore.js:61:15)

    console.log
      Initializing ExplorePage...

      at ExplorePage.log [as init] (src/js/explore.js:41:15)

    console.log
      Attempting to fetch from API...

      at ExplorePage.log [as init] (src/js/explore.js:45:15)

    console.log
      Successfully fetched 3 restaurants from API.

      at ExplorePage.log [as init] (src/js/explore.js:49:17)

    console.log
      Rendering restaurants...

      at ExplorePage.log [as init] (src/js/explore.js:61:15)

    console.log
      Initializing ExplorePage...

      at ExplorePage.log [as init] (src/js/explore.js:41:15)

    console.log
      Attempting to fetch from API...

      at ExplorePage.log [as init] (src/js/explore.js:45:15)

    console.log
      Successfully fetched 3 restaurants from API.

      at ExplorePage.log [as init] (src/js/explore.js:49:17)

    console.log
      Rendering restaurants...

      at ExplorePage.log [as init] (src/js/explore.js:61:15)

    console.log
      Initializing ExplorePage...

      at ExplorePage.log [as init] (src/js/explore.js:41:15)

    console.log
      Attempting to fetch from API...

      at ExplorePage.log [as init] (src/js/explore.js:45:15)

    console.log
      Successfully fetched 3 restaurants from API.

      at ExplorePage.log [as init] (src/js/explore.js:49:17)

    console.log
      Rendering restaurants...

      at ExplorePage.log [as init] (src/js/explore.js:61:15)

    console.log
      Initializing ExplorePage...

      at ExplorePage.log [as init] (src/js/explore.js:41:15)

    console.log
      Attempting to fetch from API...

      at ExplorePage.log [as init] (src/js/explore.js:45:15)

    console.log
      Successfully fetched 3 restaurants from API.

      at ExplorePage.log [as init] (src/js/explore.js:49:17)

    console.log
      Rendering restaurants...

      at ExplorePage.log [as init] (src/js/explore.js:61:15)

    console.log
      Initializing ExplorePage...

      at ExplorePage.log [as init] (src/js/explore.js:41:15)

    console.log
      Attempting to fetch from API...

      at ExplorePage.log [as init] (src/js/explore.js:45:15)

    console.log
      Successfully fetched 3 restaurants from API.

      at ExplorePage.log [as init] (src/js/explore.js:49:17)

    console.log
      Rendering restaurants...

      at ExplorePage.log [as init] (src/js/explore.js:61:15)

    console.log
      Initializing ExplorePage...

      at ExplorePage.log [as init] (src/js/explore.js:41:15)

    console.log
      Attempting to fetch from API...

      at ExplorePage.log [as init] (src/js/explore.js:45:15)

    console.log
      Successfully fetched 3 restaurants from API.

      at ExplorePage.log [as init] (src/js/explore.js:49:17)

    console.log
      Rendering restaurants...

      at ExplorePage.log [as init] (src/js/explore.js:61:15)

    console.log
      Initializing ExplorePage...

      at ExplorePage.log [as init] (src/js/explore.js:41:15)

    console.log
      Attempting to fetch from API...

      at ExplorePage.log [as init] (src/js/explore.js:45:15)

    console.log
      Successfully fetched 3 restaurants from API.

      at ExplorePage.log [as init] (src/js/explore.js:49:17)

    console.log
      Rendering restaurants...

      at ExplorePage.log [as init] (src/js/explore.js:61:15)

    console.log
      Initializing ExplorePage...

      at ExplorePage.log [as init] (src/js/explore.js:41:15)

    console.log
      Attempting to fetch from API...

      at ExplorePage.log [as init] (src/js/explore.js:45:15)

    console.log
      Successfully fetched 3 restaurants from API.

      at ExplorePage.log [as init] (src/js/explore.js:49:17)

    console.log
      Rendering restaurants...

      at ExplorePage.log [as init] (src/js/explore.js:61:15)

    console.log
      Initializing ExplorePage...

      at ExplorePage.log [as init] (src/js/explore.js:41:15)

    console.log
      Attempting to fetch from API...

      at ExplorePage.log [as init] (src/js/explore.js:45:15)

    console.log
      Successfully fetched 3 restaurants from API.

      at ExplorePage.log [as init] (src/js/explore.js:49:17)

    console.log
      Rendering restaurants...

      at ExplorePage.log [as init] (src/js/explore.js:61:15)

    console.log
      Initializing ExplorePage...

      at ExplorePage.log [as init] (src/js/explore.js:41:15)

    console.log
      Attempting to fetch from API...

      at ExplorePage.log [as init] (src/js/explore.js:45:15)

    console.log
      Successfully fetched 3 restaurants from API.

      at ExplorePage.log [as init] (src/js/explore.js:49:17)

    console.log
      Rendering restaurants...

      at ExplorePage.log [as init] (src/js/explore.js:61:15)

A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.

Test Suites: 1 failed, 3 passed, 4 total
Tests:       7 failed, 24 passed, 31 total
Snapshots:   0 total
Time:        28.764 s, estimated 32 s
Ran all test suites.
